// Unit6.cpp
//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Unit6.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm6 *Form6;

// Определение структуры вопроса
struct Question {
	String question;
	std::vector<String> options;
	int correctAnswerIndex;
};

// Инициализация списка вопросов
std::vector<Question> questions = {
	{"Что возвращает функция sqrt()?", {"Корень числа", "Квадрат числа", "Модуль числа"}, 0},
	{"Какой тип данных возвращает функция strlen()?", {"int", "double", "size_t"}, 2},
	// Добавьте другие вопросы
};

int currentQuestionIndex = 0;  // Индекс текущего вопроса
int score = 0;  // Счет правильных ответов

// Функция для отображения текущего вопроса
void __fastcall TForm6::ShowQuestion(int index) {
	if (index < static_cast<int>(questions.size())) {  // Преобразуем размер в int для корректного сравнения
		Label1->Caption = questions[index].question;
		RadioGroup1->Items->Clear();
		for (const auto &option : questions[index].options) {
			RadioGroup1->Items->Add(option);
		}
		RadioGroup1->ItemIndex = -1;  // Сброс выбора
	} else {
		// Используем явное приведение к int перед вызовом IntToStr
		ShowMessage("Тест завершен. Ваш результат: " + IntToStr(static_cast<int>(score)) + " из " + IntToStr(static_cast<int>(questions.size())));
		Close();  // Закрытие формы после завершения теста
	}
}

// Конструктор формы
__fastcall TForm6::TForm6(TComponent* Owner)
	: TForm(Owner)
{
}

// Обработчик нажатия на кнопку "Далее"
void __fastcall TForm6::Button1Click(TObject *Sender)
{
	if (RadioGroup1->ItemIndex == questions[currentQuestionIndex].correctAnswerIndex) {
		score++;
	}
	currentQuestionIndex++;
	ShowQuestion(currentQuestionIndex);
}

// Обработчик события при показе формы
void __fastcall TForm6::FormShow(TObject *Sender)
{
	ShowQuestion(0);
}
//---------------------------------------------------------------------------
